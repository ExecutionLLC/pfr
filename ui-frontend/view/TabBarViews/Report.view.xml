<mvc:View
    controllerName="personal.account.controller.TabBarControllers.Report"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout">
    <Page
        showHeader="false"
    enableScrolling="true">
        <layout:Grid
                width="100%">
            <Label
                    class="label-margin-top"
                    text="Движение средств за период:">
                <layoutData>
                    <layout:GridData
                            span="L3 M5 S4"
                            indent="L1 M0 S0"/>
                </layoutData>
            </Label>
            <ObjectNumber
                    class="label-margin-top"
                    number="{
						        parts:[{path:'mainModel>/balance'},{path:'techModel>/tech/currencyCode'}],
						type: 'sap.ui.model.type.Currency'
					    }">
                <layoutData>
                    <layout:GridData
                            span="L4 M4 S4"/>
                </layoutData>
            </ObjectNumber>
        </layout:Grid>
        <layout:Grid
                width="100%">
            <Label
                    class="sapUiSmallMarginTop"
                    text="{i18n>totalMany}">
                <layoutData>
                    <layout:GridData
                            span="L2 M4 S4"
                            indent="L1 M1 S1"/>
                </layoutData>
            </Label>
            <DateRangeSelection
                    placeholder="Выберите диапазон дат"
                    change="onDateRangeChange">
                <layoutData>
                    <layout:GridData
                            span="L4 M5 S4"
                            indent="L1 M0 S0"/>
                </layoutData>
            </DateRangeSelection>
            <ToggleButton
                    pressed="{techModel>/tech/isButtonShowApply}"
                    width="100%"
                    text="{
                                path:'techModel>/tech/isButtonShowApply',
                                formatter:'.formatter.formatButtonName'
                            }">
                <layoutData>
                    <layout:GridData
                            span="L2 M3 S7"
                            indent="L0 M0 S0"/>
                </layoutData>
            </ToggleButton>
            <Button
                    width="100%"
                    press="onPrint"
                    icon="sap-icon://print">
                <layoutData>
                    <layout:GridData
                            span="L2 M2 S2"/>
                </layoutData>
            </Button>
        </layout:Grid>
        <!--дополнительное поле информации при нажатой кнопке-->
        <form:Form
            visible="{techModel>/tech/isButtonShowApply}"
            editable="true">
            <form:formContainers>
                <form:FormContainer>
                    <form:FormElement>
                        <Label
                            text="Входящий остаток на 07.05.2014:"
                            class="label-margin-top">
                            <layoutData>
                                <layout:GridData
                                    span="L3 M3 S7"
                                    indent="L1 M0 S0"/>
                            </layoutData>
                        </Label>
                        <Text text="174 179, 19 рублей">
                            <layoutData>
                                <layout:GridData
                                    span="L6 M3 S7"
                                    indent="L1 M0 S0"/>
                            </layoutData>
                        </Text>
                    </form:FormElement>
                    <form:FormElement>
                        <Label
                            text="Исходящий остаток на 07.05.2017:"
                            class="label-margin-top">
                            <layoutData>
                                <layout:GridData
                                    span="L3 M3 S7"
                                    indent="L1 M0 S0"/>
                            </layoutData>
                        </Label>
                        <Text text="188 469б 72 рублей">
                            <layoutData>
                                <layout:GridData
                                    span="L6 M3 S7"
                                    indent="L1 M0 S0"/>
                            </layoutData>
                        </Text>
                    </form:FormElement>
                    <form:FormElement>
                        <Label
                            text="Итого движения денежных средств по счету за период:"
                            class="label-margin-top">
                            <layoutData>
                                <layout:GridData
                                    span="L4 M3 S7"
                                    indent="L1 M0 S0"/>
                            </layoutData>
                        </Label>
                        <Text text="14 317 рублей">
                            <layoutData>
                                <layout:GridData
                                    span="L2 M3 S7"/>
                            </layoutData>
                        </Text>
                    </form:FormElement>
                </form:FormContainer>
            </form:formContainers>
            <form:layout>
                <form:ResponsiveGridLayout
                    labelSpanXL ="3"
                    labelSpanL="3"
                    labelSpanM ="4"
                    labelSpanS ="3"
                    columnsL="1"
                    columnsM="1"
                    columnsS="1"/>
            </form:layout>
        </form:Form>
        <!--Конец доп поля-->

        <Table
                id="table--report"
                items="{
                    path:'mainModel>/operationsHistory'
                }">
            <columns>
                <Column
                    hAlign="Center">
                    <Text text="Дата"/>
                </Column>
                <Column
                    hAlign="Center">
                    <Text text="Операция"/>
                </Column>
                <Column
                    hAlign="Center">
                    <Text text="Статус"/>
                </Column>
                <Column
                    hAlign="Center">
                    <Text text="Тариф"/>
                </Column>
                <Column
                    hAlign="Center">
                    <Text text="Контрагент"/>
                </Column>
                <Column
                    hAlign="Center">
                    <Text text="ПНФ"/>
                </Column>
                <Column
                    hAlign="Center">
                    <Text text="Сумма начисления"/>
                </Column>
                <Column
                    hAlign="Center">
                    <Text text="Расч.размер зарплаты"/>
                </Column>
                <Column
                    hAlign="Center">
                    <Text text="Проверить операцию"/>
                </Column>
            </columns>
            <items>
                <ColumnListItem>
                    <cells>
                        <Text
                            text="{
				                path: 'mainModel>timestamp',
				                formatter:'.formatter.formateDateforTable'
			                }"/>
                        <Text
                            text="{mainModel>comment}"/>
                        <!--todo временная заглушка. потом будет использоваться код ниже-->
                        <core:Icon
                            src="sap-icon://overlay"
                            color= "green"/>
                        <!--<core:Icon
                            src="sap-icon://overlay"
                            color= "{
                                path:'tableModel>Status',
                                formatter: '.formatter.formatIconColorByStatus'
                            }"/>-->
                        <Text
                            text="{= ${mainModel>tariff} + '%'}"/>
                        <Text
                            text="{mainModel>contractor}"/>
                        <Text
                            text="{
                                path:'mainModel>npf',
                                formatter:'.formatter.formatNPFadressToName'
                                }"/>
                        <ObjectNumber
                                number="{
						        parts:[{path:'mainModel>amount'},{path:'techModel>/tech/currencyCode'}],
						        type: 'sap.ui.model.type.Currency'
					    }"/>
                        <ObjectNumber
                                number="{
						        parts:[
						            {path:'mainModel>amount'},
						            {path:'mainModel>tariff'},
						            {path:'techModel>/tech/currencyCode'}
                                ],
						        formatter:'.formatter.formateAmountToSalary'
					    }"/>
                        <core:Icon
                            src="sap-icon://initiative"
                            press="onIconPress"
                            size="2rem"/>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>

    </Page>
</mvc:View>