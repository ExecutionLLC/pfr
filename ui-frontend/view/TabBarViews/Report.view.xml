<mvc:View
        controllerName="personal.account.controller.TabBarControllers.Report"
        xmlns="sap.m"
        xmlns:core="sap.ui.core"
        xmlns:mvc="sap.ui.core.mvc"
        xmlns:form="sap.ui.layout.form"
        xmlns:layout="sap.ui.layout">
    <Page
            showHeader="false"
            enableScrolling="true">
        <layout:Grid
                width="100%">
            <Label
                    class="label-margin-top"
                    text="Всего накоплено:">
                <layoutData>
                    <layout:GridData
                            span="L3 M5 S4"
                            indent="L1 M0 S0"/>
                </layoutData>
            </Label>
            <ObjectNumber
                    class="label-margin-top"
                    number="{
                            parts:[{path:'mainModel>/balance'},{path:'techModel>/tech/currencyCode'}],
						    type: 'sap.ui.model.type.Currency'
					    }">
                <layoutData>
                    <layout:GridData
                            span="L4 M4 S4"/>
                </layoutData>
            </ObjectNumber>
        </layout:Grid>
        <layout:Grid
                width="100%">
            <Label
                    class="sapUiSmallMarginTop"
                    text="Движение средств за период:">
                <layoutData>
                    <layout:GridData
                            span="L3 M4 S4"
                            indent="L1 M1 S1"/>
                </layoutData>
            </Label>
            <DateRangeSelection
                    placeholder="Выберите диапазон дат"
                    change="onDateRangeChange">
                <layoutData>
                    <layout:GridData
                            span="L4 M5 S4"
                            indent="L0 M0 S0"/>
                </layoutData>
            </DateRangeSelection>
            <ToggleButton
                    pressed="{techModel>/tech/getReportTab/isShowHideButtonPressed}"
                    width="100%"
                    text="{
                            path:'techModel>/tech/getReportTab/isShowHideButtonPressed',
                            formatter:'.formatter.formatButtonName'
                          }"
                    enabled="{techModel>/tech/getReportTab/isShowHideButtonEnabled}"
            >
                <layoutData>
                    <layout:GridData
                            span="L2 M3 S7"
                            indent="L0 M0 S0"/>
                </layoutData>
            </ToggleButton>
            <Button
                    width="100%"
                    press="onPrint"
                    icon="sap-icon://print">
                <layoutData>
                    <layout:GridData
                            span="L2 M2 S2"/>
                </layoutData>
            </Button>
        </layout:Grid>
        <!--дополнительное поле информации при нажатой кнопке-->
        <form:Form
                visible="{techModel>/tech/getReportTab/isShowHideButtonPressed}"
                editable="true">
            <form:formContainers>
                <form:FormContainer>
                    <form:FormElement>
                        <Label
                                text="{= 'Входящий остаток на ' + ${techModel>/tech/getReportTab/dateFrom} }"
                                class="label-margin-top">
                            <layoutData>
                                <layout:GridData
                                        span="L3 M3 S7"
                                        indent="L1 M0 S0"/>
                            </layoutData>
                        </Label>
                        <ObjectNumber
                                number="{
                            parts:[{path:'techModel>/tech/getReportTab/AmountIncome'},{path:'techModel>/tech/currencyCode'}],
						    type: 'sap.ui.model.type.Currency'
					    }">
                            <layoutData>
                                <layout:GridData
                                        span="L6 M3 S7"
                                        indent="L1 M0 S0"/>
                            </layoutData>
                        </ObjectNumber>

                    </form:FormElement>
                    <form:FormElement>
                        <Label
                                text="{= 'Исходящий остаток на ' + ${techModel>/tech/getReportTab/dateTo} }"
                                class="label-margin-top">
                            <layoutData>
                                <layout:GridData
                                        span="L3 M3 S7"
                                        indent="L1 M0 S0"/>
                            </layoutData>
                        </Label>
                        <ObjectNumber
                                number="{
                            parts:[{path:'techModel>/tech/getReportTab/AmountOutgoing'},{path:'techModel>/tech/currencyCode'}],
						    type: 'sap.ui.model.type.Currency'
					    }">
                            <layoutData>
                                <layout:GridData
                                        span="L6 M3 S7"
                                        indent="L1 M0 S0"/>
                            </layoutData>
                        </ObjectNumber>
                    </form:FormElement>
                    <form:FormElement>
                        <Label
                                text="Итого движения денежных средств по счету за период:"
                                class="label-margin-top">
                            <layoutData>
                                <layout:GridData
                                        span="L4 M3 S7"
                                        indent="L1 M0 S0"/>
                            </layoutData>
                        </Label>
                        <ObjectNumber
                                number="{
                            parts:[{path:'techModel>/tech/getReportTab/AmountDifference'},{path:'techModel>/tech/currencyCode'}],
						    type: 'sap.ui.model.type.Currency'
					    }">
                        <layoutData>
                            <layout:GridData
                                    span="L2 M3 S7"/>
                        </layoutData>
                        </ObjectNumber>
                    </form:FormElement>
                </form:FormContainer>
            </form:formContainers>
            <form:layout>
                <form:ResponsiveGridLayout
                        labelSpanXL="3"
                        labelSpanL="3"
                        labelSpanM="4"
                        labelSpanS="3"
                        columnsL="1"
                        columnsM="1"
                        columnsS="1"/>
            </form:layout>
        </form:Form>
        <!--Конец доп поля-->

        <ScrollContainer vertical="false" horizontal="true">
            <Table
                    showNoData="false">
                <columns>
                    <Column
                            width="10%"
                            hAlign="Center">
                        <Text text="Дата"/>
                    </Column>
                    <Column
                            width="20%"
                            hAlign="Center">
                        <Text text="Операция"/>
                    </Column>
                    <Column
                            width="7%"
                            hAlign="Center">
                        <Text text="Статус"/>
                    </Column>
                    <Column
                            width="7%"
                            hAlign="Center">
                        <Text text="Тариф"/>
                    </Column>
                    <Column
                            width="12%"
                            hAlign="Center">
                        <Text text="Контрагент"/>
                    </Column>
                    <Column
                            width="8%"
                            hAlign="Center">
                        <Text text="НПФ"/>
                    </Column>
                    <Column
                            width="12%"
                            hAlign="Center">
                        <Text text="Сумма начисления"/>
                    </Column>
                    <Column
                            width="13%"
                            hAlign="Center">
                        <Text text="Расч.размер зарплаты"/>
                    </Column>
                    <Column
                            hAlign="Center">
                        <Text text="Проверить операцию"/>
                    </Column>
                </columns>
            </Table>
            <ScrollContainer vertical="true" horizontal="false">

                <Table
                        id="table--report"
                        items="{
                            path: 'techModel>/tech/getReportTab/operationsTableData',
                            sorter : {
                                path : 'timestamp',
                                descending:true
                            }
                        }">
                    <columns>
                        <Column

                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                    </columns>
                    <items>
                        <CustomListItem>
                            <Panel
                                    class="tableReport"
                                    expandable="true"
                                    expand="false"
                                    width="auto">
                                <headerToolbar>
                                    <Toolbar
                                            width="100%">
                                        <content>
                                            <Text
                                                    textAlign="Left"
                                                    width="6%"
                                                    text="{
                                                        path: 'techModel>timestamp',
                                                        formatter:'.formatter.formatDateForTable'}"/>
                                            <Text
                                                    width="20%"
                                                    textAlign="Center"
                                                    text="{techModel>comment}"/>
                                            <core:Icon
                                                    width="5%"
                                                    src="sap-icon://overlay"
                                                    color="{
                                                        path: 'techModel>isFinished',
                                                        formatter: '.formatter.formatTableItemStatus'
                                                    }"
                                            />
                                            <Text
                                                    width="7%"
                                                    textAlign="Center"
                                                    text="{= ${techModel>tariff} + '%'}"/>
                                            <Text
                                                    width="10%"
                                                    textAlign="Center"
                                                    text="{techModel>contractor}"/>
                                            <Text
                                                    width="10%"
                                                    textAlign="Center"
                                                    text="{
                                                        path:'techModel>npf',
                                                        formatter:'.formatter.formatNpfAddressToName'}"/>
                                            <ObjectNumber
                                                    class="sapUiLargeMarginEnd"
                                                    number="{
                                                        parts:[
                                                            {path:'techModel>amount'},
                                                            {path:'techModel>/tech/currencyCode'}
                                                        ],
                                                        type: 'sap.ui.model.type.Currency'}"/>
                                            <ObjectNumber
                                                    number="{
                                                        parts:[
                                                            {path:'techModel>amount'},
                                                            {path:'techModel>tariff'},
                                                            {path:'techModel>comment'},
                                                            {path:'techModel>/tech/currencyCode'}
                                                        ],
                                                        formatter:'.formatter.formatAmountToSalary'}"/>
                                        </content>
                                    </Toolbar>
                                </headerToolbar>
                                <content>
                                    <layout:VerticalLayout
                                        class="verticalLayout-margin_left">
                                        <layout:HorizontalLayout>
                                            <Label text="ID транзакции: ">
                                            </Label>
                                            <Link text="{techModel>transactionHash}"
                                                  press="onLinkPress"
                                            >
                                            </Link>
                                        </layout:HorizontalLayout>

                                        <layout:HorizontalLayout>
                                            <Label text="Отправитель: ">
                                            </Label>
                                            <Text text="{techModel>npf}">
                                            </Text>
                                        </layout:HorizontalLayout>

                                        <layout:HorizontalLayout width="100%">
                                            <Label text="Количество подтверждений: ">
                                            </Label>
                                            <Text text="{
                                                            path: 'techModel>isFinished',
                                                            formatter: '.formatter.formatNumberOfConformations'
                                                        }"
                                            />
                                        </layout:HorizontalLayout>
                                    </layout:VerticalLayout>
                                </content>
                            </Panel>
                        </CustomListItem>
                    </items>
                </Table>

            </ScrollContainer>
        </ScrollContainer>
    </Page>
</mvc:View>